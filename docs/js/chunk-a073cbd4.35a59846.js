(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a073cbd4"],{"192d":function(e,t,n){},"2bfd":function(e,t,n){},8698:function(e,t,n){"use strict";var r=n("192d"),i=n.n(r);i.a},"8a79":function(e,t,n){"use strict";var r=n("23e7"),i=n("06cf").f,a=n("50c4"),s=n("5a34"),o=n("1d80"),c=n("ab13"),l=n("c430"),u="".endsWith,d=Math.min,h=c("endsWith"),f=!l&&!h&&!!function(){var e=i(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!f&&!h},{endsWith:function(e){var t=String(o(this));s(e);var n=arguments.length>1?arguments[1]:void 0,r=a(t.length),i=void 0===n?r:d(a(n),r),c=String(e);return u?u.call(t,c,i):t.slice(i-c.length,i)===c}})},"9de3":function(e,t,n){"use strict";var r=n("f5dd"),i=n.n(r);i.a},e0c1:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.action?n("article-form",{attrs:{boardId:e.info,articleId:e.article,action:e.action}}):n("article-content",{attrs:{boardId:e.info,articleId:e.article,category:e.category,tag:e.tag}})],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?e.loaded&&!e.article?n("v-container",{attrs:{fluid:""}},[n("v-alert",{staticClass:"mb-0",attrs:{type:"warning",border:"left"}},[e._v("게시물이 존재하지 않습니다")])],1):n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-card",{staticClass:"mx-md-7 my-md-7 mx-lg-12"},[n("v-divider"),n("v-toolbar",{attrs:{color:"transparent",dense:"",flat:""}},[n("v-toolbar-title",[e.newCheck(e.article.updatedAt)?n("v-chip",{staticClass:"mr-2",attrs:{color:"success",small:"",label:"",left:""}},[e._v("new")]):e._e(),n("v-chip",{staticClass:"rounded mr-4",attrs:{outlined:"",small:"",label:"",color:"accent"}},[e._v(e._s(e.article.category))]),e._v(" "+e._s(e.article.title)+" ")],1),n("v-spacer"),e.fireUser&&e.fireUser.uid===e.article.uid||e.user&&0===e.user.level?[n("v-btn",{attrs:{icon:""},on:{click:e.articleWrite}},[n("v-icon",[e._v("mdi-pencil")])],1),n("v-btn",{attrs:{icon:""},on:{click:e.remove}},[n("v-icon",[e._v("mdi-delete")])],1)]:e._e(),n("v-btn",{attrs:{icon:""},on:{click:e.back}},[n("v-icon",[e._v("mdi-close")])],1)],2),n("v-divider"),n("v-row",{staticClass:"date-writer ma-0 pl-2"},[n("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[e._v(" 작성일 : "),n("display-time",{staticClass:"ml-2",attrs:{time:e.article.createdAt}})],1),n("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[e._v(" 수정일 : "),n("display-time",{staticClass:"ml-2",attrs:{time:e.article.updatedAt}})],1),n("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-eye")]),n("span",[e._v(e._s(e.article.readCount))])],1),n("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-comment")]),n("span",[e._v(e._s(e.article.commentCount))])],1),n("v-col",{staticClass:"text-end ",attrs:{cols:"12",sm:"4",md:"4"}},[e._v(" 작성자 : "),n("display-user",{attrs:{user:e.article.user}})],1)],1),n("v-divider"),n("v-card-text",[e.content?n("viewer",{attrs:{initialValue:e.content,"max-height":"100%"}}):n("v-container",[n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-progress-circular",{attrs:{indeterminate:""}})],1)],1)],1),n("v-card-actions",e._l(e.article.tags,(function(t){return n("v-chip",{key:t,staticClass:"mr-2",attrs:{small:"",label:"",color:"accent"},domProps:{textContent:e._s(t)}})})),1),n("v-card-actions",[n("v-btn",{staticClass:"ma-auto py-8 px-3 rounded-circle",attrs:{outlined:"",color:e.liked?"success":""},on:{click:e.like}},[n("v-icon",{attrs:{left:"",color:e.liked?"success":""}},[e._v("mdi-thumb-up")]),n("span",[e._v(e._s(e.article.likeCount))])],1)],1),n("v-card-actions",[n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-btn",{attrs:{text:"",color:"accent"},on:{click:function(t){return e.go(-1)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-left")]),e._v(" 이전글 ")],1)],1),n("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[n("v-btn",{attrs:{text:"",color:"accent",center:""},on:{click:e.back}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-format-list-bulleted")]),e._v(" 목록 ")],1)],1),n("v-col",{staticClass:"text-right",attrs:{cols:"4"}},[n("v-btn",{attrs:{text:"",color:"accent",right:""},on:{click:function(t){return e.go(1)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-right")]),e._v(" 다음글 ")],1)],1)],1)],1),n("v-divider"),n("display-comment",{attrs:{article:e.article,docRef:e.ref,color:"info"}})],1)],1):n("v-container",{attrs:{fluid:""}},[n("v-skeleton-loader",{attrs:{type:"article"}})],1)},s=[],o=(n("caad"),n("a15b"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("1276"),n("96cf"),n("1da1")),c=n("bc3a"),l=n.n(c),u=n("e311"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"pa-0"},[n("v-card-title",[n("v-textarea",{attrs:{rows:"1","append-icon":"mdi-send",label:"댓글 작성",placeholer:"Ctrl + Enter로 댓글 작성 가능",outlined:"","hide-details":"","auto-grow":"",color:"accent"},on:{"click:append":e.save,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.save(t):null}},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1),e._l(e.items,(function(t,r){return[n("v-list-item",{key:t.id},[n("v-list-item-action",[n("display-user",{attrs:{user:t.user,color:"primary"}})],1),n("v-list-item-content",{staticClass:"flex-nowrap flex-column flex-sm-row flex-md-row flex-lg-row"},[t.edit?n("v-list-item-subtitle",{staticClass:"comment"},[n("v-textarea",{staticClass:"comment ",attrs:{outlined:"",label:"댓글 수정",placeholder:"Ctrl + Enter 를 누르면 저장됩니다","append-icon":"mdi-comment-edit","hide-details":"","auto-grow":"",rows:"1",color:"accent",clearable:""},on:{"click:append":function(n){return e.update(t)},keypress:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:n.ctrlKey?e.update(t):null}},model:{value:t.comment,callback:function(n){e.$set(t,"comment",n)},expression:"item.comment"}})],1):n("v-list-item-subtitle",{staticClass:"comment",attrs:{color:"primary","auto-grow":""}},[e.newCheck(t.updatedAt)?n("v-chip",{staticClass:"mr-2",attrs:{color:"success",small:"",label:"",outlined:""}},[e._v("new")]):e._e(),e._v(" "+e._s(t.comment)+" ")],1),n("v-list-item-subtitle",{staticClass:"text-end time",attrs:{"max-width":"100px"}},[n("display-time",{attrs:{time:t.createdAt}})],1)],1),n("v-list-item-action",[n("v-btn",{attrs:{text:""},on:{click:function(n){return e.like(t)}}},[n("v-icon",{attrs:{left:"",color:e.liked(t)?"success":"#444"}},[e._v("mdi-thumb-up")]),n("span",[e._v(e._s(t.likeCount))])],1),e.fireUser&&e.fireUser.uid===t.uid?n("v-btn",{attrs:{icon:"",color:t.edit?"accent":""},on:{click:function(e){t.edit=!t.edit}}},[n("v-icon",[e._v("mdi-pencil")])],1):e._e(),e.fireUser&&e.fireUser.uid===t.uid||e.user&&0===e.user.level?n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.remove(t)}}},[n("v-icon",[e._v("mdi-delete")])],1):e._e()],1)],1),r<e.items.length-1?n("v-divider",{key:r}):e._e()]})),n("v-list-item",[e.lastDoc&&e.items.length<e.article.commentCount?n("v-btn",{directives:[{name:"intersect",rawName:"v-intersect",value:e.onIntersect,expression:"onIntersect"}],attrs:{loading:e.loading,text:"",color:"accent",block:"",outlined:""},on:{click:e.more}},[e._v("더보기")]):e._e()],1)],2)},h=[],f=(n("c740"),n("4160"),n("45fc"),n("a434"),n("a9e3"),n("159b"),n("2ef0")),m=n("09b3"),p=n("9817"),v=5,b={props:["article","docRef"],components:{DisplayTime:u["a"],DisplayUser:m["a"]},data:function(){return{comment:"",items:[],unsubscribe:null,lastDoc:null,loading:!1,newCheck:p["a"]}},computed:{user:function(){return this.$store.state.user},fireUser:function(){return this.$store.state.fireUser}},watch:{docRef:function(){this.subscribe()}},created:function(){this.subscribe()},destroyed:function(){this.unsubscribe&&this.unsubscribe()},methods:{snapshotToItems:function(e){var t=this;this.lastDoc=Object(f["last"])(e.docs),e.docs.forEach((function(e){var n=t.items.some((function(t){return e.id===t.id}));if(!n){var r=e.data();r.id=e.id,r.createdAt=r.createdAt.toDate(),r.updatedAt=r.updatedAt.toDate(),r.edit=!1,t.items.push(r)}})),this.items.sort((function(e,t){var n=Number(e.id),r=Number(t.id);return r-n}))},subscribe:function(){var e=this;this.unsubscribe&&this.unsubscribe(),this.items=[],this.unsubscribe=this.docRef.collection("comments").orderBy("createdAt","desc").limit(v).onSnapshot((function(t){t.empty?e.items=[]:e.snapshotToItems(t)}))},more:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.lastDoc||alert("더이상 데이터가 없습니다"),!e.loading){t.next=3;break}return t.abrupt("return");case 3:return e.loading=!0,t.prev=4,t.next=7,e.docRef.collection("comments").orderBy("createdAt","desc").startAfter(e.lastDoc).limit(v).get();case 7:n=t.sent,e.snapshotToItems(n);case 9:return t.prev=9,e.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[4,,9,12]])})))()},onIntersect:function(e,t,n){n&&this.more()},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fireUser||alert("로그인이 필요합니다"),e.comment){t.next=4;break}return alert("댓글을 작성해주세요"),t.abrupt("return");case 4:if(!(e.comment.length>300)){t.next=7;break}return alert("300자를 초과하였습니다. 300자 이내로 작성해주세요"),t.abrupt("return");case 7:n={createdAt:new Date,updatedAt:new Date,comment:e.comment,uid:e.$store.state.fireUser.uid,user:{email:e.user.email,photoURL:e.user.photoURL,displayName:e.user.displayName},likeCount:0,likeUids:[]},r=n.createdAt.getTime().toString(),e.docRef.collection("comments").doc(r).set(n),e.comment="";case 11:case"end":return t.stop()}}),t)})))()},liked:function(e){return!!this.fireUser&&e.likeUids.includes(this.fireUser.uid)},like:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.fireUser){n.next=2;break}throw Error("로그인이 필요합니다");case 2:if(!t.liked(e)){n.next=7;break}return n.next=5,t.docRef.collection("comments").doc(e.id).update({likeCount:t.$firebase.firestore.FieldValue.increment(-1),likeUids:t.$firebase.firestore.FieldValue.arrayRemove(t.fireUser.uid)});case 5:n.next=9;break;case 7:return n.next=9,t.docRef.collection("comments").doc(e.id).update({likeCount:t.$firebase.firestore.FieldValue.increment(1),likeUids:t.$firebase.firestore.FieldValue.arrayUnion(t.fireUser.uid)});case 9:return n.next=11,t.docRef.collection("comments").doc(e.id).get();case 11:r=n.sent,i=r.data(),e.likeCount=i.likeCount,e.likeUids=i.likeUids;case 15:case"end":return n.stop()}}),n)})))()},remove:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.docRef.collection("comments").doc(e.id).delete();case 2:r=t.items.findIndex((function(t){return t.id===e.id})),t.items.splice(r,1);case 4:case"end":return n.stop()}}),n)})))()},update:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.updatedAt=new Date,n.prev=1,n.next=4,t.docRef.collection("comments").doc(e.id).update(e);case 4:return n.prev=4,e.edit=!1,n.finish(4);case 7:case"end":return n.stop()}}),n,null,[[1,,4,7]])})))()}}},g=b,x=(n("9de3"),n("2877")),I=n("6544"),y=n.n(I),w=n("8336"),k=n("99d9"),C=n("cc20"),S=n("a523"),V=n("ce7e"),D=n("132d"),$=n("da13"),_=n("1800"),R=n("5d23"),U=n("a844"),O=n("269a"),j=n.n(O),T=n("90a2"),A=Object(x["a"])(g,d,h,!1,null,"308e431d",null),F=A.exports;y()(A,{VBtn:w["a"],VCardTitle:k["d"],VChip:C["a"],VContainer:S["a"],VDivider:V["a"],VIcon:D["a"],VListItem:$["a"],VListItemAction:_["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VTextarea:U["a"]}),j()(A,{Intersect:T["a"]});var E={components:{DisplayTime:u["a"],DisplayComment:F,DisplayUser:m["a"]},props:["boardId","articleId","user","category","tag"],data:function(){return{content:"",ref:null,unsubscribe:null,article:null,doc:null,newCheck:p["a"],loaded:!1}},computed:{user:function(){return this.$store.state.user},fireUser:function(){return this.$store.state.fireUser},liked:function(){return!!this.fireUser&&this.article.likeUids.includes(this.fireUser.uid)}},watch:{boardId:function(){this.subscribe()},articleId:function(){this.subscribe()}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.subscribe();case 1:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.unsubscribe&&this.unsubscribe()},methods:{readCountUpdate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ref.update({readCount:e.$firebase.firestore.FieldValue.increment(1)});case 2:case"end":return t.stop()}}),t)})))()},subscribe:function(){var e=this;this.unsubscribe&&this.unsubscribe(),this.ref=this.$firebase.firestore().collection("boards").doc(this.boardId).collection("articles").doc(this.articleId),this.ref.update({readCount:this.$firebase.firestore.FieldValue.increment(1)}),this.loaded=!1,this.unsubscribe=this.ref.onSnapshot((function(t){if(e.loaded=!0,t.exists){e.doc=t;var n=t.data();n.createdAt=n.createdAt.toDate(),n.updatedAt=n.updatedAt.toDate(),e.article&&e.article.url===n.url||e.fetch(n.url),e.article=n}else e.back()}),console.error)},fetch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.content="",n.next=3,l.a.get(e);case 3:r=n.sent,t.content="string"===typeof r.data?r.data:r.data.toString();case 5:case"end":return n.stop()}}),n)})))()},articleWrite:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({path:e.$route.path,query:{action:"write"}});case 1:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ref.delete();case 2:case"end":return t.stop()}}),t)})))()},back:function(){var e=this.$route.path.split("/");e.pop(),this.category?this.$router.push({path:e.join("/"),query:{category:this.category}}):this.$router.push({path:e.join("/")})},like:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fireUser){t.next=2;break}throw Error("로그인이 필요합니다");case 2:if(!e.liked){t.next=7;break}return t.next=5,e.ref.update({likeCount:e.$firebase.firestore.FieldValue.increment(-1),likeUids:e.$firebase.firestore.FieldValue.arrayRemove(e.fireUser.uid)});case 5:t.next=9;break;case 7:return t.next=9,e.ref.update({likeCount:e.$firebase.firestore.FieldValue.increment(1),likeUids:e.$firebase.firestore.FieldValue.arrayUnion(e.fireUser.uid)});case 9:case"end":return t.stop()}}),t)})))()},go:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.doc){n.next=2;break}throw Error("읽지 못하였습니다");case 2:if(r=t.$firebase.firestore().collection("boards").doc(t.boardId).collection("articles").where("category","==",t.category).orderBy("createdAt","desc"),!(e<0)){n.next=9;break}return n.next=6,r.endBefore(t.doc).limitToLast(1).get();case 6:i=n.sent,n.next=12;break;case 9:return n.next=11,r.startAfter(t.doc).limit(1).get();case 11:i=n.sent;case 12:if(!i.empty){n.next=14;break}throw Error("더이상 페이지가 없습니다");case 14:a=i.docs[0],s=t.$route.path.split("/"),s.pop(),s.push(a.id),t.category?t.$router.push({path:s.join("/"),query:{category:t.category}}):t.$router.push({path:s.join("/")}),t.$router.push({path:s.join("/")});case 20:case"end":return n.stop()}}),n)})))()}}},M=E,L=(n("8698"),n("0798")),B=n("b0af"),N=n("62ad"),P=n("490a"),W=n("0fd9"),q=n("3129"),z=n("2fa4"),K=n("71d9"),J=n("2a7f"),Y=Object(x["a"])(M,a,s,!1,null,"5663ee18",null),G=Y.exports;y()(Y,{VAlert:L["a"],VBtn:w["a"],VCard:B["a"],VCardActions:k["a"],VCardText:k["c"],VChip:C["a"],VCol:N["a"],VContainer:S["a"],VDivider:V["a"],VIcon:D["a"],VProgressCircular:P["a"],VRow:W["a"],VSkeletonLoader:q["a"],VSpacer:z["a"],VToolbar:K["a"],VToolbarTitle:J["a"]});var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{class:e.$vuetify.breakpoint.xs?"pa-0":"px-md-7 py-md-7 px-lg-12",attrs:{fluid:""}},[n("v-form",[n("v-card",{attrs:{loading:e.loading}},[n("v-toolbar",{attrs:{color:"transparent",dense:"",flat:""}},[n("v-toolbar-title",[e._v("Article 작성")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$router.push("/board/"+e.boardId)}}},[n("v-icon",[e._v("mdi-arrow-left")])],1),n("v-btn",{attrs:{icon:"",disabled:!e.user},on:{click:e.save}},[n("v-icon",[e._v("mdi-content-save")])],1)],1),n("v-card-text",[n("v-row",[e.board?n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-combobox",{attrs:{items:e.board.categories,label:"분류",outlined:"","hide-details":""},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1):e._e(),e.board?n("v-col",{attrs:{cols:"12",sm:"8"}},[n("v-combobox",{attrs:{items:e.board.tags,label:"태그",outlined:"","hide-details":"",multiple:"",small:"","small-chips":""},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1):e._e()],1),n("v-text-field",{attrs:{outlined:"",label:"제목"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),"new"===e.articleId?n("editor",{ref:"editor",attrs:{initialValue:e.form.content,initialEditType:"wysiwyg",options:{hideModeSwitch:!0},height:"500px"}}):[e.form.content?n("editor",{ref:"editor",attrs:{initialValue:e.form.content,initialEditType:"wysiwyg",options:{hideModeSwitch:!0},height:"500px"}}):n("v-container",[n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-progress-circular",{attrs:{indeterminate:""}})],1)],1)]],2)],1)],1)],1)},Q=[],X=n("b85c"),Z=function(e,t){if(!e.length)return"";var n,r="내용 없음",i=e.split("\n"),a=[],s=Object(X["a"])(i);try{for(s.s();!(n=s.n()).done;){var o=n.value,c=o.substr(0,1);"["!==c&&"!"!==c&&a.push(o)}}catch(u){s.e(u)}finally{s.f()}var l=a.join("\n");return l.length>t&&(r=l.substr(0,t),r+="\n..."),r},ee={props:["boardId","articleId","action"],data:function(){return{form:{category:"일반",tags:[],title:"",content:""},exists:!1,loading:!1,ref:null,article:null,board:null}},computed:{user:function(){return this.$store.state.user},fireUser:function(){return this.$store.state.fireUser}},watch:{boardId:function(){this.fetch()}},created:function(){this.fetch()},destroyed:function(){},methods:{fetch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.ref=e.$firebase.firestore().collection("boards").doc(e.boardId),t.next=3,e.ref.get();case 3:if(n=t.sent,e.board=n.data(),"new"!==e.articleId){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,e.ref.collection("articles").doc(e.articleId).get();case 9:if(r=t.sent,e.exists=r.exists,e.exists){t.next=13;break}return t.abrupt("return");case 13:return i=r.data(),e.article=i,e.form.title=i.title,e.form.category=i.category,e.form.tags=i.tags,t.next=20,l.a.get(i.url);case 20:a=t.sent,s=a.data,e.form.content=s;case 23:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fireUser){t.next=2;break}throw Error("로그인이 필요합니다");case 2:if(e.form.title){t.next=4;break}throw Error("제목은 필수 항목입니다");case 4:if(e.form.category){t.next=6;break}throw Error("분류 필수 항목입니다");case 6:if(n=e.$refs.editor.invoke("getMarkdown"),n){t.next=9;break}throw Error("내용은 필수 항목입니다");case 9:if(e.loading=!0,t.prev=10,r=new Date,"#",i={title:e.form.title,category:e.form.category,tags:e.form.tags,updatedAt:r,summary:Z(n,300)},"new"!==e.articleId){t.next=35;break}return a=r.getTime().toString(),s=a+"-"+e.fireUser.uid+".md",t.next=19,e.$firebase.storage().ref().child("boards").child(e.boardId).child(s).putString(n);case 19:return o=t.sent,t.next=22,o.ref.getDownloadURL();case 22:return i.url=t.sent,i.createdAt=r,i.commentCount=0,i.readCount=0,i.uid=e.$store.state.fireUser.uid,i.user={email:e.user.email,photoURL:e.user.photoURL,displayName:e.user.displayName},i.likeCount=0,i.likeUids=[],t.next=32,e.ref.collection("articles").doc(a).set(i);case 32:e.$router.push("/board/"+e.boardId),t.next=41;break;case 35:return c=e.articleId+"-"+e.article.uid+".md",t.next=38,e.$firebase.storage().ref().child("boards").child(e.boardId).child(c).putString(n);case 38:return t.next=40,e.ref.collection("articles").doc(e.articleId).update(i);case 40:e.$router.push(e.$route.path);case 41:return t.prev=41,e.loading=!1,t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[10,,41,44]])})))()}}},te=ee,ne=(n("7db0"),n("c975"),n("fb6a"),n("b0c0"),n("8a79"),n("5530")),re=(n("2bfd"),n("b974")),ie=(n("4de4"),n("d81d"),n("498a"),n("8654")),ae=n("d9f7"),se=n("80d2"),oe=Object(ne["a"])(Object(ne["a"])({},re["b"]),{},{offsetY:!0,offsetOverflow:!0,transition:!1}),ce=re["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(e,t,n){return n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:re["a"].options.props.menuProps.type,default:function(){return oe}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return Object(ne["a"])(Object(ne["a"])({},re["a"].options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var e=this;return this.selectedItems.map((function(t){return e.getValue(t)}))},hasDisplayedItems:function(){var e=this;return this.hideSelected?this.filteredItems.some((function(t){return!e.hasItem(t)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var e=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(t){var n=Object(se["q"])(t,e.itemText),r=null!=n?String(n):"";return e.filter(t,String(e.internalSearch),r)}))},internalSearch:{get:function(){return this.lazySearch},set:function(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var e=re["a"].options.computed.$_menuProps.call(this);return e.contentClass="v-autocomplete__content ".concat(e.contentClass||"").trim(),Object(ne["a"])(Object(ne["a"])({},oe),e)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var e=this;return this.multiple?null:this.selectedItems.find((function(t){return e.valueComparator(e.getValue(t),e.getValue(e.internalValue))}))},listData:function(){var e=re["a"].options.computed.listData.call(this);return e.props=Object(ne["a"])(Object(ne["a"])({},e.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items:function(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput:function(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(e,t){var n=this;e!==t&&(this.setMenuIndex(-1),this.$nextTick((function(){n.internalSearch&&(1===e.length||n.autoSelectFirst)&&(n.$refs.menu.getTiles(),n.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(e){this.searchIsDirty||(this.multiple&&e===se["w"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===se["w"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==se["w"].backspace&&e!==se["w"].delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var e=this.selectedIndex,t=this.selectedItems[e];if(this.isInteractive&&!this.getDisabled(t)){var n=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===n){var r=this.selectedItems.length,i=e!==r-1?e:e-1,a=this.selectedItems[i];a?this.selectItem(t):this.setValue(this.multiple?[]:void 0),this.selectedIndex=i}else this.selectedIndex=n}},clearableCallback:function(){this.internalSearch=void 0,re["a"].options.methods.clearableCallback.call(this)},genInput:function(){var e=ie["a"].options.methods.genInput.call(this);return e.data=Object(ae["a"])(e.data,{attrs:{"aria-activedescendant":Object(se["o"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(se["o"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot:function(){var e=re["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections:function(){return this.hasSlot||this.multiple?re["a"].options.methods.genSelections.call(this):[]},onClick:function(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput:function(e){if(!(this.selectedIndex>-1)&&e.target){var t=e.target,n=t.value;t.value&&this.activateMenu(),this.internalSearch=n,this.badInput=t.validity&&t.validity.badInput}},onKeyDown:function(e){var t=e.keyCode;re["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown:function(e){},onTabDown:function(e){re["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown:function(e){e.preventDefault(),this.activateMenu()},selectItem:function(e){re["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems:function(){re["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var e=this;this.$nextTick((function(){e.multiple&&e.internalSearch&&e.isMenuActive||(e.internalSearch=!e.selectedItems.length||e.multiple||e.hasSlot?null:e.getText(e.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy:function(e){var t,n;if(-1!==this.selectedIndex){var r=this.selectedItems[this.selectedIndex],i=this.getText(r);null==(t=e.clipboardData)||t.setData("text/plain",i),null==(n=e.clipboardData)||n.setData("text/vnd.vuetify.autocomplete.item+plain",i),e.preventDefault()}}}}),le=ce.extend({name:"v-combobox",props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{computedCounterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return re["a"].options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onInternalSearchChanged:function(e){if(e&&this.multiple&&this.delimiters.length){var t=this.delimiters.find((function(t){return e.endsWith(t)}));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genInput:function(){var e=ce.options.methods.genInput.call(this);return delete e.data.attrs.name,e.data.on.paste=this.onPaste,e},genChipSelection:function(e,t){var n=this,r=re["a"].options.methods.genChipSelection.call(this,e,t);return this.multiple&&(r.componentOptions.listeners=Object(ne["a"])(Object(ne["a"])({},r.componentOptions.listeners),{},{dblclick:function(){n.editingIndex=t,n.internalSearch=n.getText(e),n.selectedIndex=-1}})),r},onChipInput:function(e){re["a"].options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown:function(e){e.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onFilteredItemsChanged:function(e,t){this.autoSelectFirst&&ce.options.methods.onFilteredItemsChanged.call(this,e,t)},onKeyDown:function(e){var t=e.keyCode;re["a"].options.methods.onKeyDown.call(this,e),this.multiple&&t===se["w"].left&&0===this.$refs.input.selectionStart?this.updateSelf():t===se["w"].enter&&this.onEnterDown(e),this.changeSelectedIndex(t)},onTabDown:function(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();ce.options.methods.onTabDown.call(this,e)},selectItem:function(e){this.editingIndex>-1?this.updateEditing():ce.options.methods.selectItem.call(this,e)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(e){var t;re["a"].options.methods.setValue.call(this,null!=(t=e)?t:this.internalSearch)},updateEditing:function(){var e=this.internalValue.slice();e[this.editingIndex]=this.internalSearch,this.setValue(e),this.editingIndex=-1},updateCombobox:function(){var e=Boolean(this.$scopedSlots.selection)||this.hasChips;e&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),e&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var e=this.getMenuIndex();if(!(e<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var t=this.selectedItems.indexOf(this.internalSearch);if(t>-1){var n=this.internalValue.slice();n.splice(t,1),this.setValue(n)}if(e>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}},onPaste:function(e){var t;if(this.multiple&&!this.searchIsDirty){var n=null==(t=e.clipboardData)?void 0:t.getData("text/vnd.vuetify.autocomplete.item+plain");n&&-1===this.findExistingIndex(n)&&(e.preventDefault(),re["a"].options.methods.selectItem.call(this,n))}}}}),ue=n("4bd4"),de=Object(x["a"])(te,H,Q,!1,null,null,null),he=de.exports;y()(de,{VBtn:w["a"],VCard:B["a"],VCardText:k["c"],VCol:N["a"],VCombobox:le,VContainer:S["a"],VForm:ue["a"],VIcon:D["a"],VProgressCircular:P["a"],VRow:W["a"],VSpacer:z["a"],VTextField:ie["a"],VToolbar:K["a"],VToolbarTitle:J["a"]});var fe={components:{ArticleContent:G,ArticleForm:he},computed:{info:function(){return this.$route.params.info},article:function(){return this.$route.params.article},action:function(){return this.$route.query.action},category:function(){return this.$route.params.category},tag:function(){return this.$route.query.tag}}},me=fe,pe=Object(x["a"])(me,r,i,!1,null,null,null);t["default"]=pe.exports},f5dd:function(e,t,n){}}]);
//# sourceMappingURL=chunk-a073cbd4.35a59846.js.map