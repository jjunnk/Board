(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e1d66aa"],{"0798":function(t,e,i){"use strict";i("caad");var r=i("5530"),n=i("ade3"),s=(i("0c18"),i("10d2")),a=i("afdd"),o=i("9d26"),c=i("f2e7"),l=i("7560"),u=i("2b0e"),d=u["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),h=i("58df"),f=i("d9bd");e["a"]=Object(h["a"])(s["a"],c["a"],d).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:Object(n["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(a["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(o["a"],{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(o["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=Object(r["a"])(Object(r["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||l["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(f["a"])("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},"09b3":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-chip",t._g({staticClass:"rounded",attrs:{color:"transparent",small:"small"===t.size}},r),["small"!==t.size?i("v-avatar",{attrs:{left:""}},[i("v-img",{attrs:{src:t.user.photoURL}})],1):t._e(),t._v(t._s(t.user.displayName)+" ")],1)]}}])},[i("span",[t._v(t._s(t.user.email))])])},n=[],s={props:["user","size"]},a=s,o=i("2877"),c=i("6544"),l=i.n(c),u=i("8212"),d=i("cc20"),h=i("adda"),f=i("3a2f"),m=Object(o["a"])(a,r,n,!1,null,null,null);e["a"]=m.exports;l()(m,{VAvatar:u["a"],VChip:d["a"],VImg:h["a"],VTooltip:f["a"]})},"0c18":function(t,e,i){},"2bfd":function(t,e,i){},"2eb2":function(t,e,i){"use strict";i("b678")},"360b":function(t,e,i){"use strict";i("be8a")},"4bd4":function(t,e,i){"use strict";i("4de4"),i("7db0"),i("4160"),i("caad"),i("07ac"),i("2532"),i("159b");var r=i("5530"),n=i("58df"),s=i("7e2b"),a=i("3206");e["a"]=Object(n["a"])(s["a"],Object(a["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},r={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(r.valid=i(t)))})):r.valid=i(t),r},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(r["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"8a79":function(t,e,i){"use strict";var r=i("23e7"),n=i("06cf").f,s=i("50c4"),a=i("5a34"),o=i("1d80"),c=i("ab13"),l=i("c430"),u="".endsWith,d=Math.min,h=c("endsWith"),f=!l&&!h&&!!function(){var t=n(String.prototype,"endsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!f&&!h},{endsWith:function(t){var e=String(o(this));a(t);var i=arguments.length>1?arguments[1]:void 0,r=s(e.length),n=void 0===i?r:d(s(i),r),c=String(t);return u?u.call(e,c,n):e.slice(n-c.length,n)===c}})},9817:function(t,e,i){"use strict";var r=i("c1df"),n=i.n(r);e["a"]=function(t){var e=n()(t),i=n()(),r=i.diff(e,"hours");return r<12}},b678:function(t,e,i){},be8a:function(t,e,i){},e0c1:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.action?i("article-form",{attrs:{boardId:t.info,articleId:t.article,action:t.action}}):i("article-content",{attrs:{boardId:t.info,articleId:t.article,category:t.category,tag:t.tag}})],1)},n=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loaded?t.loaded&&!t.article?i("v-container",{attrs:{fluid:""}},[i("v-alert",{staticClass:"mb-0",attrs:{type:"warning",border:"left"}},[t._v("게시물이 존재하지 않습니다")])],1):i("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[i("v-card",{staticClass:"mx-md-7 my-md-7 mx-lg-12"},[i("v-divider"),i("v-toolbar",{attrs:{color:"transparent",dense:"",flat:""}},[i("v-toolbar-title",[t.newCheck(t.article.updatedAt)?i("v-chip",{staticClass:"mr-2",attrs:{color:"success",small:"",label:"",left:""}},[t._v("new")]):t._e(),i("v-chip",{staticClass:"rounded mr-4",attrs:{outlined:"",small:"",label:"",color:"accent"}},[t._v(t._s(t.article.category))]),t._v(" "+t._s(t.article.title)+" ")],1),i("v-spacer"),t.fireUser&&t.fireUser.uid===t.article.uid||t.user&&0===t.user.level?[i("v-btn",{attrs:{icon:""},on:{click:t.articleWrite}},[i("v-icon",[t._v("mdi-pencil")])],1),i("v-btn",{attrs:{icon:""},on:{click:t.remove}},[i("v-icon",[t._v("mdi-delete")])],1)]:t._e(),i("v-btn",{attrs:{icon:""},on:{click:t.back}},[i("v-icon",[t._v("mdi-close")])],1)],2),i("v-divider"),i("v-row",{staticClass:"date-writer ma-0 pl-2"},[i("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[t._v(" 작성일 : "),i("display-time",{staticClass:"ml-2",attrs:{time:t.article.createdAt}})],1),i("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[t._v(" 수정일 : "),i("display-time",{staticClass:"ml-2",attrs:{time:t.article.updatedAt}})],1),i("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-eye")]),i("span",[t._v(t._s(t.article.readCount))])],1),i("v-col",{staticClass:"text-left ",attrs:{cols:"3",sm:"2",md:"2"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-comment")]),i("span",[t._v(t._s(t.article.commentCount))])],1),i("v-col",{staticClass:"text-end ",attrs:{cols:"12",sm:"4",md:"4"}},[t._v(" 작성자 : "),i("display-user",{attrs:{user:t.article.user}})],1)],1),i("v-divider"),i("v-card-text",[t.content?i("viewer",{attrs:{initialValue:t.content,"max-height":"100%"}}):i("v-container",[i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-progress-circular",{attrs:{indeterminate:""}})],1)],1)],1),i("v-card-actions",t._l(t.article.tags,(function(e){return i("v-chip",{key:e,staticClass:"mr-2",attrs:{small:"",label:"",color:"accent"},domProps:{textContent:t._s(e)}})})),1),i("v-card-actions",[i("v-btn",{staticClass:"ma-auto py-8 px-3 rounded-circle",attrs:{outlined:"",color:t.liked?"success":""},on:{click:t.like}},[i("v-icon",{attrs:{left:"",color:t.liked?"success":""}},[t._v("mdi-thumb-up")]),i("span",[t._v(t._s(t.article.likeCount))])],1)],1),i("v-card-actions",[i("v-row",[i("v-col",{attrs:{cols:"4"}},[i("v-btn",{attrs:{text:"",color:"accent"},on:{click:function(e){return t.go(-1)}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),t._v(" 이전글 ")],1)],1),i("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[i("v-btn",{attrs:{text:"",color:"accent",center:""},on:{click:t.back}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-format-list-bulleted")]),t._v(" 목록 ")],1)],1),i("v-col",{staticClass:"text-right",attrs:{cols:"4"}},[i("v-btn",{attrs:{text:"",color:"accent",right:""},on:{click:function(e){return t.go(1)}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-right")]),t._v(" 다음글 ")],1)],1)],1)],1),i("v-divider"),i("display-comment",{attrs:{article:t.article,docRef:t.ref,color:"info"}})],1)],1):i("v-container",{attrs:{fluid:""}},[i("v-skeleton-loader",{attrs:{type:"article"}})],1)},a=[],o=(i("caad"),i("a15b"),i("d3b7"),i("ac1f"),i("25f0"),i("2532"),i("1276"),i("96cf"),i("1da1")),c=i("bc3a"),l=i.n(c),u=i("e311"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0"},[i("v-card-title",[i("v-textarea",{attrs:{rows:"1","append-icon":"mdi-send",label:"댓글 작성",placeholer:"Ctrl + Enter로 댓글 작성 가능",outlined:"","hide-details":"","auto-grow":"",color:"accent"},on:{"click:append":t.save,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.save(e):null}},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._l(t.items,(function(e,r){return[i("v-list-item",{key:e.id},[i("v-list-item-action",[i("display-user",{attrs:{user:e.user,color:"primary"}})],1),i("v-list-item-content",{staticClass:"flex-nowrap flex-column flex-sm-row flex-md-row flex-lg-row"},[e.edit?i("v-list-item-subtitle",{staticClass:"comment"},[i("v-textarea",{staticClass:"comment ",attrs:{outlined:"",label:"댓글 수정",placeholder:"Ctrl + Enter 를 누르면 저장됩니다","append-icon":"mdi-comment-edit","hide-details":"","auto-grow":"",rows:"1",color:"accent",clearable:""},on:{"click:append":function(i){return t.update(e)},keypress:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:i.ctrlKey?t.update(e):null}},model:{value:e.comment,callback:function(i){t.$set(e,"comment",i)},expression:"item.comment"}})],1):i("v-list-item-subtitle",{staticClass:"comment",attrs:{color:"primary","auto-grow":""}},[t.newCheck(e.updatedAt)?i("v-chip",{staticClass:"mr-2",attrs:{color:"success",small:"",label:"",outlined:""}},[t._v("new")]):t._e(),t._v(" "+t._s(e.comment)+" ")],1),i("v-list-item-subtitle",{staticClass:"text-end time",attrs:{"max-width":"100px"}},[i("display-time",{attrs:{time:e.createdAt}})],1)],1),i("v-list-item-action",[i("v-btn",{attrs:{text:""},on:{click:function(i){return t.like(e)}}},[i("v-icon",{attrs:{left:"",color:t.liked(e)?"success":"#444"}},[t._v("mdi-thumb-up")]),i("span",[t._v(t._s(e.likeCount))])],1),t.fireUser&&t.fireUser.uid===e.uid?i("v-btn",{attrs:{icon:"",color:e.edit?"accent":""},on:{click:function(t){e.edit=!e.edit}}},[i("v-icon",[t._v("mdi-pencil")])],1):t._e(),t.fireUser&&t.fireUser.uid===e.uid||t.user&&0===t.user.level?i("v-btn",{attrs:{icon:""},on:{click:function(i){return t.remove(e)}}},[i("v-icon",[t._v("mdi-delete")])],1):t._e()],1)],1),r<t.items.length-1?i("v-divider",{key:r}):t._e()]})),i("v-list-item",[t.lastDoc&&t.items.length<t.article.commentCount?i("v-btn",{directives:[{name:"intersect",rawName:"v-intersect",value:t.onIntersect,expression:"onIntersect"}],attrs:{loading:t.loading,text:"",color:"accent",block:"",outlined:""},on:{click:t.more}},[t._v("더보기")]):t._e()],1)],2)},h=[],f=(i("c740"),i("4160"),i("45fc"),i("a434"),i("a9e3"),i("159b"),i("2ef0")),m=i("09b3"),p=i("9817"),v=5,b={props:["article","docRef"],components:{DisplayTime:u["a"],DisplayUser:m["a"]},data:function(){return{comment:"",items:[],unsubscribe:null,lastDoc:null,loading:!1,newCheck:p["a"]}},computed:{user:function(){return this.$store.state.user},fireUser:function(){return this.$store.state.fireUser}},watch:{docRef:function(){this.subscribe()}},created:function(){this.subscribe()},destroyed:function(){this.unsubscribe&&this.unsubscribe()},methods:{snapshotToItems:function(t){var e=this;this.lastDoc=Object(f["last"])(t.docs),t.docs.forEach((function(t){var i=e.items.some((function(e){return t.id===e.id}));if(!i){var r=t.data();r.id=t.id,r.createdAt=r.createdAt.toDate(),r.updatedAt=r.updatedAt.toDate(),r.edit=!1,e.items.push(r)}})),this.items.sort((function(t,e){var i=Number(t.id),r=Number(e.id);return r-i}))},subscribe:function(){var t=this;this.unsubscribe&&this.unsubscribe(),this.items=[],this.unsubscribe=this.docRef.collection("comments").orderBy("createdAt","desc").limit(v).onSnapshot((function(e){e.empty?t.items=[]:t.snapshotToItems(e)}))},more:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.lastDoc||alert("더이상 데이터가 없습니다"),!t.loading){e.next=3;break}return e.abrupt("return");case 3:return t.loading=!0,e.prev=4,e.next=7,t.docRef.collection("comments").orderBy("createdAt","desc").startAfter(t.lastDoc).limit(v).get();case 7:i=e.sent,t.snapshotToItems(i);case 9:return e.prev=9,t.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[4,,9,12]])})))()},onIntersect:function(t,e,i){i&&this.more()},save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fireUser||alert("로그인이 필요합니다"),t.comment){e.next=4;break}return alert("댓글을 작성해주세요"),e.abrupt("return");case 4:if(!(t.comment.length>300)){e.next=7;break}return alert("300자를 초과하였습니다. 300자 이내로 작성해주세요"),e.abrupt("return");case 7:i={createdAt:new Date,updatedAt:new Date,comment:t.comment,uid:t.$store.state.fireUser.uid,user:{email:t.user.email,photoURL:t.user.photoURL,displayName:t.user.displayName},likeCount:0,likeUids:[]},r=i.createdAt.getTime().toString(),t.docRef.collection("comments").doc(r).set(i),t.comment="";case 11:case"end":return e.stop()}}),e)})))()},liked:function(t){return!!this.fireUser&&t.likeUids.includes(this.fireUser.uid)},like:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var r,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.fireUser){i.next=2;break}throw Error("로그인이 필요합니다");case 2:if(!e.liked(t)){i.next=7;break}return i.next=5,e.docRef.collection("comments").doc(t.id).update({likeCount:e.$firebase.firestore.FieldValue.increment(-1),likeUids:e.$firebase.firestore.FieldValue.arrayRemove(e.fireUser.uid)});case 5:i.next=9;break;case 7:return i.next=9,e.docRef.collection("comments").doc(t.id).update({likeCount:e.$firebase.firestore.FieldValue.increment(1),likeUids:e.$firebase.firestore.FieldValue.arrayUnion(e.fireUser.uid)});case 9:return i.next=11,e.docRef.collection("comments").doc(t.id).get();case 11:r=i.sent,n=r.data(),t.likeCount=n.likeCount,t.likeUids=n.likeUids;case 15:case"end":return i.stop()}}),i)})))()},remove:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.docRef.collection("comments").doc(t.id).delete();case 2:r=e.items.findIndex((function(e){return e.id===t.id})),e.items.splice(r,1);case 4:case"end":return i.stop()}}),i)})))()},update:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.updatedAt=new Date,i.prev=1,i.next=4,e.docRef.collection("comments").doc(t.id).update(t);case 4:return i.prev=4,t.edit=!1,i.finish(4);case 7:case"end":return i.stop()}}),i,null,[[1,,4,7]])})))()}}},g=b,x=(i("2eb2"),i("2877")),y=i("6544"),I=i.n(y),w=i("8336"),k=i("99d9"),C=i("cc20"),_=i("a523"),S=i("ce7e"),$=i("132d"),V=i("da13"),D=i("1800"),O=i("5d23"),j=i("a844"),T=i("269a"),R=i.n(T),U=i("90a2"),A=Object(x["a"])(g,d,h,!1,null,"fb687db8",null),B=A.exports;I()(A,{VBtn:w["a"],VCardTitle:k["d"],VChip:C["a"],VContainer:_["a"],VDivider:S["a"],VIcon:$["a"],VListItem:V["a"],VListItemAction:D["a"],VListItemContent:O["a"],VListItemSubtitle:O["b"],VTextarea:j["a"]}),R()(A,{Intersect:U["a"]});var E={components:{DisplayTime:u["a"],DisplayComment:B,DisplayUser:m["a"]},props:["boardId","articleId","user","category","tag"],data:function(){return{content:"",ref:null,unsubscribe:null,article:null,doc:null,newCheck:p["a"],loaded:!1}},computed:{user:function(){return this.$store.state.user},fireUser:function(){return this.$store.state.fireUser},liked:function(){return!!this.fireUser&&this.article.likeUids.includes(this.fireUser.uid)}},watch:{boardId:function(){this.subscribe()},articleId:function(){this.subscribe()}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.subscribe();case 1:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.unsubscribe&&this.unsubscribe()},methods:{readCountUpdate:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ref.update({readCount:t.$firebase.firestore.FieldValue.increment(1)});case 2:case"end":return e.stop()}}),e)})))()},subscribe:function(){var t=this;this.unsubscribe&&this.unsubscribe(),this.ref=this.$firebase.firestore().collection("boards").doc(this.boardId).collection("articles").doc(this.articleId),this.ref.update({readCount:this.$firebase.firestore.FieldValue.increment(1)}),this.loaded=!1,this.unsubscribe=this.ref.onSnapshot((function(e){if(t.loaded=!0,e.exists){t.doc=e;var i=e.data();i.createdAt=i.createdAt.toDate(),i.updatedAt=i.updatedAt.toDate(),t.article&&t.article.url===i.url||t.fetch(i.url),t.article=i}else t.back()}),console.error)},fetch:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.content="",i.next=3,l.a.get(t);case 3:r=i.sent,e.content="string"===typeof r.data?r.data:r.data.toString();case 5:case"end":return i.stop()}}),i)})))()},articleWrite:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$router.push({path:t.$route.path,query:{action:"write"}});case 1:case"end":return e.stop()}}),e)})))()},remove:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ref.delete();case 2:case"end":return e.stop()}}),e)})))()},back:function(){var t=this.$route.path.split("/");t.pop(),this.category?this.$router.push({path:t.join("/"),query:{category:this.category}}):this.$router.push({path:t.join("/")})},like:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fireUser){e.next=2;break}throw Error("로그인이 필요합니다");case 2:if(!t.liked){e.next=7;break}return e.next=5,t.ref.update({likeCount:t.$firebase.firestore.FieldValue.increment(-1),likeUids:t.$firebase.firestore.FieldValue.arrayRemove(t.fireUser.uid)});case 5:e.next=9;break;case 7:return e.next=9,t.ref.update({likeCount:t.$firebase.firestore.FieldValue.increment(1),likeUids:t.$firebase.firestore.FieldValue.arrayUnion(t.fireUser.uid)});case 9:case"end":return e.stop()}}),e)})))()},go:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var r,n,s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.doc){i.next=2;break}throw Error("읽지 못하였습니다");case 2:if(r=e.$firebase.firestore().collection("boards").doc(e.boardId).collection("articles").where("category","==",e.category).orderBy("createdAt","desc"),!(t<0)){i.next=9;break}return i.next=6,r.endBefore(e.doc).limitToLast(1).get();case 6:n=i.sent,i.next=12;break;case 9:return i.next=11,r.startAfter(e.doc).limit(1).get();case 11:n=i.sent;case 12:if(!n.empty){i.next=14;break}throw Error("더이상 페이지가 없습니다");case 14:s=n.docs[0],a=e.$route.path.split("/"),a.pop(),a.push(s.id),e.category?e.$router.push({path:a.join("/"),query:{category:e.category}}):e.$router.push({path:a.join("/")}),e.$router.push({path:a.join("/")});case 20:case"end":return i.stop()}}),i)})))()}}},F=E,L=(i("360b"),i("0798")),M=i("b0af"),N=i("62ad"),P=i("490a"),z=i("0fd9"),W=i("3129"),q=i("2fa4"),K=i("71d9"),J=i("2a7f"),Y=Object(x["a"])(F,s,a,!1,null,"30a4f5e0",null),G=Y.exports;I()(Y,{VAlert:L["a"],VBtn:w["a"],VCard:M["a"],VCardActions:k["a"],VCardText:k["c"],VChip:C["a"],VCol:N["a"],VContainer:_["a"],VDivider:S["a"],VIcon:$["a"],VProgressCircular:P["a"],VRow:z["a"],VSkeletonLoader:W["a"],VSpacer:q["a"],VToolbar:K["a"],VToolbarTitle:J["a"]});var H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{class:t.$vuetify.breakpoint.xs?"pa-0":"px-md-7 py-md-7 px-lg-12",attrs:{fluid:""}},[i("v-form",[i("v-card",{attrs:{loading:t.loading}},[i("v-toolbar",{attrs:{color:"transparent",dense:"",flat:""}},[i("v-toolbar-title",[t._v("Article 작성")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$router.push("/board/"+t.boardId)}}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-btn",{attrs:{icon:"",disabled:!t.user},on:{click:t.save}},[i("v-icon",[t._v("mdi-content-save")])],1)],1),i("v-card-text",[i("v-row",[t.board?i("v-col",{attrs:{cols:"12",sm:"4"}},[i("v-combobox",{attrs:{items:t.board.categories,label:"분류",outlined:"","hide-details":""},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1):t._e(),t.board?i("v-col",{attrs:{cols:"12",sm:"8"}},[i("v-combobox",{attrs:{items:t.board.tags,label:"태그",outlined:"","hide-details":"",multiple:"",small:"","small-chips":""},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1):t._e()],1),i("v-text-field",{attrs:{outlined:"",label:"제목"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),"new"===t.articleId?i("editor",{ref:"editor",attrs:{initialValue:t.form.content,initialEditType:"wysiwyg",options:{hideModeSwitch:!0},height:"500px"}}):[t.form.content?i("editor",{ref:"editor",attrs:{initialValue:t.form.content,initialEditType:"wysiwyg",options:{hideModeSwitch:!0},height:"500px"}}):i("v-container",[i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-progress-circular",{attrs:{indeterminate:""}})],1)],1)]],2)],1)],1)],1)},Q=[],X=i("b85c"),Z=function(t,e){if(!t.length)return"";var i,r="내용 없음",n=t.split("\n"),s=[],a=Object(X["a"])(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,c=o.substr(0,1);"["!==c&&"!"!==c&&s.push(o)}}catch(u){a.e(u)}finally{a.f()}var l=s.join("\n");return l.length>e&&(r=l.substr(0,e),r+="\n..."),r},tt={props:["boardId","articleId","action"],data:function(){return{form:{category:"일반",tags:[],title:"",content:""},exists:!1,loading:!1,ref:null,article:null,board:null}},computed:{user:function(){return this.$store.state.user},fireUser:function(){return this.$store.state.fireUser}},watch:{boardId:function(){this.fetch()}},created:function(){this.fetch()},destroyed:function(){},methods:{fetch:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,r,n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.ref=t.$firebase.firestore().collection("boards").doc(t.boardId),e.next=3,t.ref.get();case 3:if(i=e.sent,t.board=i.data(),"new"!==t.articleId){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.ref.collection("articles").doc(t.articleId).get();case 9:if(r=e.sent,t.exists=r.exists,t.exists){e.next=13;break}return e.abrupt("return");case 13:return n=r.data(),t.article=n,t.form.title=n.title,t.form.category=n.category,t.form.tags=n.tags,e.next=20,l.a.get(n.url);case 20:s=e.sent,a=s.data,t.form.content=a;case 23:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,r,n,s,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fireUser){e.next=2;break}throw Error("로그인이 필요합니다");case 2:if(t.form.title){e.next=4;break}throw Error("제목은 필수 항목입니다");case 4:if(t.form.category){e.next=6;break}throw Error("분류 필수 항목입니다");case 6:if(i=t.$refs.editor.invoke("getMarkdown"),i){e.next=9;break}throw Error("내용은 필수 항목입니다");case 9:if(t.loading=!0,e.prev=10,r=new Date,"#",n={title:t.form.title,category:t.form.category,tags:t.form.tags,updatedAt:r,summary:Z(i,300)},"new"!==t.articleId){e.next=35;break}return s=r.getTime().toString(),a=s+"-"+t.fireUser.uid+".md",e.next=19,t.$firebase.storage().ref().child("boards").child(t.boardId).child(a).putString(i);case 19:return o=e.sent,e.next=22,o.ref.getDownloadURL();case 22:return n.url=e.sent,n.createdAt=r,n.commentCount=0,n.readCount=0,n.uid=t.$store.state.fireUser.uid,n.user={email:t.user.email,photoURL:t.user.photoURL,displayName:t.user.displayName},n.likeCount=0,n.likeUids=[],e.next=32,t.ref.collection("articles").doc(s).set(n);case 32:t.$router.push("/board/"+t.boardId),e.next=41;break;case 35:return c=t.articleId+"-"+t.article.uid+".md",e.next=38,t.$firebase.storage().ref().child("boards").child(t.boardId).child(c).putString(i);case 38:return e.next=40,t.ref.collection("articles").doc(t.articleId).update(n);case 40:t.$router.push(t.$route.path);case 41:return e.prev=41,t.loading=!1,e.finish(41);case 44:case"end":return e.stop()}}),e,null,[[10,,41,44]])})))()}}},et=tt,it=(i("7db0"),i("c975"),i("fb6a"),i("b0c0"),i("8a79"),i("5530")),rt=(i("2bfd"),i("b974")),nt=(i("4de4"),i("d81d"),i("498a"),i("8654")),st=i("d9f7"),at=i("80d2"),ot=Object(it["a"])(Object(it["a"])({},rt["b"]),{},{offsetY:!0,offsetOverflow:!0,transition:!1}),ct=rt["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(t,e,i){return i.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:rt["a"].options.props.menuProps.type,default:function(){return ot}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return Object(it["a"])(Object(it["a"])({},rt["a"].options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var t=this;return this.selectedItems.map((function(e){return t.getValue(e)}))},hasDisplayedItems:function(){var t=this;return this.hideSelected?this.filteredItems.some((function(e){return!t.hasItem(e)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var t=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(e){var i=Object(at["q"])(e,t.itemText),r=null!=i?String(i):"";return t.filter(e,String(t.internalSearch),r)}))},internalSearch:{get:function(){return this.lazySearch},set:function(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var t=rt["a"].options.computed.$_menuProps.call(this);return t.contentClass="v-autocomplete__content ".concat(t.contentClass||"").trim(),Object(it["a"])(Object(it["a"])({},ot),t)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var t=this;return this.multiple?null:this.selectedItems.find((function(e){return t.valueComparator(t.getValue(e),t.getValue(t.internalValue))}))},listData:function(){var t=rt["a"].options.computed.listData.call(this);return t.props=Object(it["a"])(Object(it["a"])({},t.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items:function(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput:function(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(t,e){var i=this;t!==e&&(this.setMenuIndex(-1),this.$nextTick((function(){i.internalSearch&&(1===t.length||i.autoSelectFirst)&&(i.$refs.menu.getTiles(),i.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(t){this.searchIsDirty||(this.multiple&&t===at["w"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===at["w"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==at["w"].backspace&&t!==at["w"].delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var t=this.selectedIndex,e=this.selectedItems[t];if(this.isInteractive&&!this.getDisabled(e)){var i=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===i){var r=this.selectedItems.length,n=t!==r-1?t:t-1,s=this.selectedItems[n];s?this.selectItem(e):this.setValue(this.multiple?[]:void 0),this.selectedIndex=n}else this.selectedIndex=i}},clearableCallback:function(){this.internalSearch=void 0,rt["a"].options.methods.clearableCallback.call(this)},genInput:function(){var t=nt["a"].options.methods.genInput.call(this);return t.data=Object(st["a"])(t.data,{attrs:{"aria-activedescendant":Object(at["o"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(at["o"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot:function(){var t=rt["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections:function(){return this.hasSlot||this.multiple?rt["a"].options.methods.genSelections.call(this):[]},onClick:function(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput:function(t){if(!(this.selectedIndex>-1)&&t.target){var e=t.target,i=e.value;e.value&&this.activateMenu(),this.internalSearch=i,this.badInput=e.validity&&e.validity.badInput}},onKeyDown:function(t){var e=t.keyCode;rt["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown:function(t){},onTabDown:function(t){rt["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown:function(t){t.preventDefault(),this.activateMenu()},selectItem:function(t){rt["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems:function(){rt["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var t=this;this.$nextTick((function(){t.multiple&&t.internalSearch&&t.isMenuActive||(t.internalSearch=!t.selectedItems.length||t.multiple||t.hasSlot?null:t.getText(t.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy:function(t){var e,i;if(-1!==this.selectedIndex){var r=this.selectedItems[this.selectedIndex],n=this.getText(r);null==(e=t.clipboardData)||e.setData("text/plain",n),null==(i=t.clipboardData)||i.setData("text/vnd.vuetify.autocomplete.item+plain",n),t.preventDefault()}}}}),lt=ct.extend({name:"v-combobox",props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{computedCounterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return rt["a"].options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onInternalSearchChanged:function(t){if(t&&this.multiple&&this.delimiters.length){var e=this.delimiters.find((function(e){return t.endsWith(e)}));null!=e&&(this.internalSearch=t.slice(0,t.length-e.length),this.updateTags())}this.updateMenuDimensions()},genInput:function(){var t=ct.options.methods.genInput.call(this);return delete t.data.attrs.name,t.data.on.paste=this.onPaste,t},genChipSelection:function(t,e){var i=this,r=rt["a"].options.methods.genChipSelection.call(this,t,e);return this.multiple&&(r.componentOptions.listeners=Object(it["a"])(Object(it["a"])({},r.componentOptions.listeners),{},{dblclick:function(){i.editingIndex=e,i.internalSearch=i.getText(t),i.selectedIndex=-1}})),r},onChipInput:function(t){rt["a"].options.methods.onChipInput.call(this,t),this.editingIndex=-1},onEnterDown:function(t){t.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onFilteredItemsChanged:function(t,e){this.autoSelectFirst&&ct.options.methods.onFilteredItemsChanged.call(this,t,e)},onKeyDown:function(t){var e=t.keyCode;rt["a"].options.methods.onKeyDown.call(this,t),this.multiple&&e===at["w"].left&&0===this.$refs.input.selectionStart?this.updateSelf():e===at["w"].enter&&this.onEnterDown(t),this.changeSelectedIndex(e)},onTabDown:function(t){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return t.preventDefault(),t.stopPropagation(),this.updateTags();ct.options.methods.onTabDown.call(this,t)},selectItem:function(t){this.editingIndex>-1?this.updateEditing():ct.options.methods.selectItem.call(this,t)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(t){var e;rt["a"].options.methods.setValue.call(this,null!=(e=t)?e:this.internalSearch)},updateEditing:function(){var t=this.internalValue.slice();t[this.editingIndex]=this.internalSearch,this.setValue(t),this.editingIndex=-1},updateCombobox:function(){var t=Boolean(this.$scopedSlots.selection)||this.hasChips;t&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),t&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var t=this.getMenuIndex();if(!(t<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var e=this.selectedItems.indexOf(this.internalSearch);if(e>-1){var i=this.internalValue.slice();i.splice(e,1),this.setValue(i)}if(t>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}},onPaste:function(t){var e;if(this.multiple&&!this.searchIsDirty){var i=null==(e=t.clipboardData)?void 0:e.getData("text/vnd.vuetify.autocomplete.item+plain");i&&-1===this.findExistingIndex(i)&&(t.preventDefault(),rt["a"].options.methods.selectItem.call(this,i))}}}}),ut=i("4bd4"),dt=Object(x["a"])(et,H,Q,!1,null,null,null),ht=dt.exports;I()(dt,{VBtn:w["a"],VCard:M["a"],VCardText:k["c"],VCol:N["a"],VCombobox:lt,VContainer:_["a"],VForm:ut["a"],VIcon:$["a"],VProgressCircular:P["a"],VRow:z["a"],VSpacer:q["a"],VTextField:nt["a"],VToolbar:K["a"],VToolbarTitle:J["a"]});var ft={components:{ArticleContent:G,ArticleForm:ht},computed:{info:function(){return this.$route.params.info},article:function(){return this.$route.params.article},action:function(){return this.$route.query.action},category:function(){return this.$route.params.category},tag:function(){return this.$route.query.tag}}},mt=ft,pt=Object(x["a"])(mt,r,n,!1,null,null,null);e["default"]=pt.exports},e311:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("span",t._g({},r),[t._v(t._s(t.displayTime))])]}}])},[i("span",[t._v(t._s(t.time.toLocaleString()))])])},n=[],s={props:["time"],computed:{displayTime:function(){var t=this.$moment(this.time),e=this.$moment(),i=e.diff(t,"days");return i>0?t.toDate().toLocaleDateString():t.fromNow()}}},a=s,o=i("2877"),c=i("6544"),l=i.n(c),u=i("3a2f"),d=Object(o["a"])(a,r,n,!1,null,null,null);e["a"]=d.exports;l()(d,{VTooltip:u["a"]})}}]);
//# sourceMappingURL=chunk-6e1d66aa.c9922271.js.map